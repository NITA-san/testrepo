/*
 * This file was generated by the Gradle 'init' task.
 *
 * This is a general purpose Gradle build.
 * Learn more about Gradle by exploring our samples at https://docs.gradle.org/6.8.3/samples
 */

plugins {
  id 'war'
  id 'eclipse'
  id "com.diffplug.spotless" version "5.14.0"
  id 'checkstyle'
}

repositories {
  mavenCentral()
}

java {
  toolchain {
    languageVersion = JavaLanguageVersion.of(8)
  }
}

checkstyle {
    configFile = file("${configDirectory}/google_checks.xml")
}

dependencies {
  compileOnly 'com.google.googlejavaformat:google-java-format:1.10.0'
  compileOnly group: 'javax', name: 'javaee-api', version: '8.0.1'
  implementation 'GW:GW:1.0'
  // https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter-engine
//  testImplementation group: 'org.junit.jupiter', name: 'junit-jupiter-engine', version: '5.7.2'
  testImplementation files("lib/junit-platform-console-standalone-1.7.2-all.jar");
}

tasks.register('copyFile', Copy) {
  dependsOn 'war'
  from "$buildDir/libs/fakewww.war"
  into "$buildDir/../docker/app"
  rename '(.+).war', 'app.war'
}

//apply plugin: 'groovy'
//spotless {
//  groovy {
//    importOrder() // standard import order
//  }
//  groovyGradle {
//    target '*.gradle' // default target of groovyGradle
//  }
//  java {
//    importOrder('java', 'javax', 'com.acme', '') // or importOrderFile
//    removeUnusedImports()
//    eclipse().configFile('spotless.eclipseformat.xml')
//
//    //		googleJavaFormat() // has its own section below
//  }
//}

